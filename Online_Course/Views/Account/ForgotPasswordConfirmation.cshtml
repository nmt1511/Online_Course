@{
    ViewData["Title"] = "Xác nhận yêu cầu";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var resetToken = TempData["ResetToken"] as string;
    var resetEmail = TempData["ResetEmail"] as string;
}

<div class="min-h-[80vh] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full">
        <!-- Success Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-500/10 mb-4 ring-8 ring-green-500/5">
                <span class="material-symbols-outlined text-green-500 text-4xl">mark_email_read</span>
            </div>
            <h2 class="text-3xl font-extrabold text-slate-900 dark:text-white tracking-tight">Kiểm tra Email</h2>
            <div class="mt-3 px-4 py-3 rounded-xl bg-blue-50 dark:bg-primary/5 text-blue-700 dark:text-primary text-sm font-medium">
                @(TempData["Message"] ?? "Nếu email tồn tại trong hệ thống, bạn sẽ nhận được hướng dẫn đặt lại mật khẩu.")
            </div>
        </div>

        <div class="bg-white dark:bg-surface-dark rounded-2xl shadow-xl border border-slate-200 dark:border-border-dark overflow-hidden transition-all duration-300">
            @if (!string.IsNullOrEmpty(resetToken) && !string.IsNullOrEmpty(resetEmail))
            {
                <div class="p-8 border-b border-slate-100 dark:border-border-dark">
                    <div class="flex items-start gap-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl mb-6">
                        <span class="material-symbols-outlined text-yellow-600 dark:text-yellow-400">info</span>
                        <div>
                            <p class="text-yellow-800 dark:text-yellow-200 text-sm font-bold">Chế độ Demo</p>
                            <p class="text-yellow-700 dark:text-yellow-300 text-xs">Trong thực tế, link này sẽ được gửi qua email của bạn.</p>
                        </div>
                    </div>
                    
                    <a asp-action="ResetPassword" asp-route-token="@resetToken" asp-route-email="@resetEmail"
                       class="group relative w-full flex justify-center py-3.5 px-4 border border-transparent font-bold rounded-xl text-white bg-primary hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary shadow-lg shadow-primary/25 transition-all duration-200">
                        <span class="absolute left-0 inset-y-0 flex items-center pl-3">
                            <span class="material-symbols-outlined text-xl group-hover:scale-110 transition-transform">lock_open</span>
                        </span>
                        Đặt lại mật khẩu ngay
                    </a>
                </div>
            }
            else
            {
                <div class="p-8 text-center">
                    <p class="text-slate-500 dark:text-text-secondary text-sm">
                        Vui lòng kiểm tra hộp thư đến (và cả thư mục spam) của bạn để tìm link đặt lại mật khẩu.
                    </p>
                </div>
            }

            <div class="px-8 py-4 bg-slate-50 dark:bg-background-dark/30 flex justify-center border-t border-slate-100 dark:border-border-dark">
                <a asp-action="Login" class="inline-flex items-center gap-2 text-primary hover:text-blue-400 font-semibold text-sm transition-colors group">
                    <span class="material-symbols-outlined text-sm group-hover:-translate-x-1 transition-transform">arrow_back</span>
                    Quay lại đăng nhập
                </a>
            </div>
        </div>
    </div>
</div>
